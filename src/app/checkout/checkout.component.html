<app-layout>

  <div class="m-auto py-4 px-3 app-checkout--container">

    <ng-container *ngIf="!(checkoutComplete$ | async); else checkoutCompleteTemplate">
      <app-checkout-form
        *ngIf="productsCount$ | async; else emptyBasketTemplate"
        [totalPrice]="totalPrice$ | async"
        [currency]="currency$ | async"
        (checkout)="checkout($event)">
      </app-checkout-form>
    </ng-container>

    <ng-template #checkoutCompleteTemplate>
      <div class="text-center px-3 py-5">
        <div class="fs-2 mb-4">{{'CHECKOUT_FORM.THANK_YOU_FOR_YOUR_PURCHASE' | translate}}</div>
        <button
          class="btn btn-outline-primary"
          data-test="app-checkout-buy-more"
          routerLink="/">
          {{'CHECKOUT_FORM.BUY_MORE' | translate}}
        </button>
      </div>
    </ng-template>

    <ng-template #emptyBasketTemplate>
      <div class="text-center p-1 p-sm-5" data-test="basket-empty">
        <i class="bi bi-cart fs-1"></i>
        <div class="fs-3">{{'BASKET_EMPTY' | translate}}</div>
      </div>
    </ng-template>

  </div>

  <app-loader *ngIf="inProgress$ | async"></app-loader>

</app-layout>
